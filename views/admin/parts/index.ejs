<% include ../../adminLayout %>

<div class="panel panel-info">
  <div style="float: right; padding-top: 4px; padding-right: 15px;">
    <% if (user) { %>
    <a href="/admin/logout" class="btn btn-default btn-sm">Logout</a>
    <% } %>
    <a href="/admin/index" class="btn btn-default btn-sm">Back To Home</a>
  </div>

  <div class="clear"></div>

  <div class="panel-heading">
    <h3 class="panel-title"><%=title %></h3>
  </div>
  

  <div class="panel-body">

      <div class="col-sm-12" data-ng-app="adminPartModule" data-ng-controller="adminRemovePartController">
      <!-- show any messages that come back with authentication -->
        <% if (typeof message != "undefined" && message.length > 0) { %>
            <div class="alert alert-danger"><%= message %></div>
        <% } %>
        <div class="well">
            <a href="/admin/parts/createPart" class="btn btn-warning" style="float: right;">Create New part</a>
            <h3><span class="fa fa-chain"></span> Parts</h3>
            <div class="clear"></div>
            <div class='table-scrollable' style="max-height: 600px;">
                <table
                    class="table table-striped table-hover">
                <tr class="success">
                    <td>Part Name</td>
                    <td>Description</td>
                    <td>Category</td>
                    <td>Inactive</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                
                <% parts.forEach(function(part) {%>
                <tr>
                    <td><%=part.name%></td>
                    <td><%=part.description%></td>
                    <td><%=part.category%></td>
                    <td><%=part.deleted ? 'Yes' : 'No'%></td>
                    <td>
                        <a href="/admin/parts/edit/<%=part.id%>" class="btn btn-info" style="width: 100%;">
                            Edit
                        </a>
                    </td>
                    <td>
                        <button ng-click="markDeleted(<%=part.id%>)" class="btn btn-danger" style="width: 100%;">
                            Remove
                        </button>
                    </td>
                </tr>
                <% }) %>
                </table>
                <% if (typeof parts == 'undefined') { %>
                    <p> No parts found.</p>
                <% } %>
            </div>
        </div>
    </div>
  </div>
</div>

<% include ../../footer %>

<script src="../../../bower_components/angular/angular.min.js" type="text/javascript"></script>

<script src="../../../javascripts/app/admin/part/adminPartModule.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../javascripts/app/admin/part/adminPartService.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../javascripts/app/admin/part/adminRemovePartController.js" type="text/javascript" charset="utf-8"></script>