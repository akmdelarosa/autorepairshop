<% include ../layout %>

<div class="panel panel-info">
  <div style="float: right; padding-top: 4px; padding-right: 15px;">
    <% if (user) { %>
    <a href="/logout" class="btn btn-default btn-sm">Logout</a>
    <% } %>
    <a href="/appointment/index" class="btn btn-default btn-sm">Back To Appointment</a>
  </div>

  <div class="clear"></div>

  <div class="panel-heading">
    <h3 class="panel-title"><%=title %></h3>
  </div>
  

  <div class="panel-body" data-ng-app="appointmentModule">

    <div data-ng-controller="scheduleAppointmentStep1Controller">
      
 

      <form class="navbar-form navbar-left" role="search"
            method="POST"
            name="formSelectVehicle">
        <div class="row">    
          <h3>Select Your Vehicle</h3>
          <div class="form-group" data-ng-cloak>
              Year:
              <select id="year" data-ng-model="year" ng-options="year for year in years">
                  <option value=''>Select</option>
              </select>
          </div>
          <div class="form-group" data-ng-cloak>
              Make:
              <select id="make" ng-disabled="!makes" data-ng-model="make" ng-options="make for make in makes">
                  <option value=''>Select</option>
              </select>
          </div>
          <div class="form-group" data-ng-cloak>
              Model:
              <select id="model" ng-disabled="!models" data-ng-model="model" ng-options="model for model in models">
                  <option value=''>Select</option>
              </select>
          </div>
        </div><!-- end of year/make/model -->

        <div class="row" ng-show="displayYearMakeModelNextButton">
          <br />
          <div class="form-group" style="padding-left40%">
            <button type="button" class="btn btn-primary" ng-disabled="!model || !make || !year" 
                    ng-click="showDateTimeBlock()">
              Next
            </button>
          </div>
          <br /><br />
        </div>
        <br /><br />

        <div class="row" ng-show="displayDateTimeBlock && !displayYearMakeModelNextButton">
        <h3>Select Date and Time</h3>
          <div class="form-group" data-ng-cloak>
              Date:
              <select id="date" data-ng-model="date" ng-options="date | date:'MM/dd/yyyy' for date in dates">
                  <option value=''>Select</option>
              </select>
          </div>
          <div class="form-group" data-ng-cloak>
              Time:
              <select id="time" ng-disabled="!times" data-ng-model="time" ng-options="time | date:'hh:mm a' for time in times">
                  <option value=''>Select</option>
              </select>
          </div>
        </div><!-- end of date/time-->

        <div class="row" ng-show="displayDateTimeNextButton">
          <br />
          <div class="form-group" style="padding-left40%">
            <button type="button" class="btn btn-primary" ng-disabled="!time || !date ||!year || !make || !model" 
                    ng-click="showServiceBlock()">
              Next
            </button>
          </div>
          <br /><br />
        </div><!-- end of date/time next btn-->
        <br /><br />

        <div class="row" ng-show="displayServiceBlock && !displayYearMakeModelNextButton && !displayDateTimeNextButton">
          <h3>Select Service</h3>
          <div class="col-xs-12 col-sm-6 form-group" data-ng-show="services.length > 0">
            <div style="height: 350px; overflow-y: scroll; padding: 2px; box-shadow: 1px 1px 5px #555 inset;">
            <label class="ng-binding ng-scope" style="display: block; padding: 5px;" ng-repeat="service in services">
              <input type="checkbox" checklist-model="selectedServices"
                checklist-value="service" 
                checklist-comparator=".id"> 
              <p style="display: inline-block;">{{service.name}}</p>
              <p>{{service.description}}</p>   
              <br />
            </label>
            </div>
          </div>
             
          <div class="col-xs-12 col-sm-6">
            <h4>Services selected:</h4>
            <ul>
              <li ng-repeat="selectedService in selectedServices">{{selectedService.name}}</li>
            </ul>
          </div>
        </div><!-- end of services -->

        <div class="row" ng-show="displayServiceNextButton">
          <br />
          <div class="form-group" style="padding-left40%">
            <button type="button" class="btn btn-primary" ng-disabled="!selectedServices.length>0 || !model || !make || !year || !date || !time" 
                    ng-click="updateServices(selectedServices)">
              Next
            </button>
          </div>
          <br /><br />
        </div><!-- end of services next btn-->
        </div>
        <br /><br />

      </form>
    </div>
    <br />
  </div>
</div>

<link href="../../bower_components/angular-bootstrap-calendar/dist/css/angular-bootstrap-calendar.min.css" rel="stylesheet">
<script src="../../bower_components/moment/min/moment.min.js" type="text/javascript"></script>
<script src="../../bower_components/angular/angular.min.js" type="text/javascript"></script>
<script src="../../bower_components/angular-bootstrap-calendar/dist/js/angular-bootstrap-calendar-tpls.min.js" type="text/javascript"></script>
<script src="../../bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js" type="text/javascript"></script>
<script src='../../bower_components/checklist-model/checklist-model.js'></script>
<script src="../../bower_components/angular-multi-step-form/dist/browser/angular-multi-step-form.min.js" type="text/javascript"></script>
<script src="../../javascripts/app/appointment/appointmentModule.js" type="text/javascript"></script>
<script src="../../javascripts/app/appointment/appointmentService.js" type="text/javascript"></script>
<script src="../../javascripts/app/appointment/scheduleAppointmentStep1Controller.js" type="text/javascript"></script>
<script src="../../javascripts/app/calendar/helpers.js" type="text/javascript"></script>
<script src="../../javascripts/app/calendar/calendarController.js" type="text/javascript"></script>
